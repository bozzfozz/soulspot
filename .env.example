# =============================================================================
# SoulSpot Bridge - Environment Configuration
# =============================================================================
#
# ⚠️  IMPORTANT: CREDENTIALS ARE NOT CONFIGURED HERE!
#
# Service credentials (Spotify, Deezer, slskd) are configured via the
# Settings UI in the web interface. They are stored in the database,
# NOT in environment variables.
#
# This file is ONLY for infrastructure settings like:
# - Docker configuration (PUID, PGID, TZ)
# - Database URL (if using custom database)
# - Debug/logging settings for development
#
# After starting the app, go to Settings in the web UI to configure
# your Spotify, Deezer, and slskd credentials.
#
# See: docs/architecture/CONFIGURATION.md for details.
# =============================================================================

# -----------------------------------------------------------------------------
# Docker Configuration (for Docker Compose deployment)
# -----------------------------------------------------------------------------
# User and Group IDs for file permissions
PUID=1000
PGID=1000
UMASK=002

# Timezone (e.g., Europe/Berlin, America/New_York, UTC)
TZ=Europe/Berlin

# -----------------------------------------------------------------------------
# Application Settings (Optional - good defaults exist)
# -----------------------------------------------------------------------------
# These have sensible defaults in settings.py and are typically not needed
# in .env unless you want to override them for local development.
APP_NAME=SoulSpot Bridge  # Default: "SoulSpot Bridge"
DEBUG=true                # Default: false (use true for local dev)
LOG_LEVEL=INFO            # Default: INFO

# -----------------------------------------------------------------------------
# Security (Optional for local use)
# -----------------------------------------------------------------------------
# The application has a default secret key suitable for local development.
# Only set this if you need stronger security for your local environment.
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# SECRET_KEY=change-me-to-a-random-secret-key

# -----------------------------------------------------------------------------
# Database Configuration (SQLite)
# -----------------------------------------------------------------------------
# For Docker: sqlite+aiosqlite:///config/soulspot.db
# For local development: sqlite+aiosqlite:///./soulspot.db
DATABASE_URL=sqlite+aiosqlite:///./soulspot.db

# -----------------------------------------------------------------------------
# ⚠️  SERVICE CREDENTIALS - CONFIGURE VIA SETTINGS UI, NOT HERE!
# -----------------------------------------------------------------------------
# Spotify, Deezer, and slskd credentials are configured in the web UI.
# Go to Settings after starting the app.
#
# The following variables are DEPRECATED and will be ignored:
# - SPOTIFY_CLIENT_ID, SPOTIFY_CLIENT_SECRET, SPOTIFY_REDIRECT_URI
# - DEEZER_APP_ID, DEEZER_SECRET, DEEZER_REDIRECT_URI
# - SLSKD_URL, SLSKD_API_KEY, SLSKD_USERNAME, SLSKD_PASSWORD
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# MusicBrainz Configuration (rate-limited, no auth needed)
# -----------------------------------------------------------------------------
MUSICBRAINZ_APP_NAME=SoulSpot-Bridge
MUSICBRAINZ_APP_VERSION=0.1.0
MUSICBRAINZ_CONTACT=

# -----------------------------------------------------------------------------
# File Storage (Optional - defaults work for both Docker and local dev)
# -----------------------------------------------------------------------------
# For Docker (container paths): /downloads, /music, /config/images, /config/tmp
#   These are automatically set by docker-entrypoint.sh
# For local development: use relative or absolute local paths (set below)
DOWNLOAD_PATH=./downloads
MUSIC_PATH=./music
IMAGE_PATH=./images
TEMP_PATH=./tmp

# -----------------------------------------------------------------------------
# API Configuration (Optional - good defaults exist)
# -----------------------------------------------------------------------------
# For Docker: API_HOST=0.0.0.0 and API_PORT=8765 (set in Dockerfile)
# For local development: defaults are API_HOST=0.0.0.0 and API_PORT=8000
# Only set these if you need to override the defaults
API_HOST=0.0.0.0
# For Docker: 8765
# For local development: 8000
API_PORT=8000
API_WORKERS=1

# Cookie Security (Production setting)
# Set to true in production when using HTTPS, false for local development
API_SECURE_COOKIES=false  # Default: false (enable in production with HTTPS)
API_SESSION_COOKIE_NAME=session_id  # Default: session_id
API_SESSION_MAX_AGE=3600  # Session cookie lifetime in seconds (default: 3600 = 1 hour)

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:8000,http://localhost:3000
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Observability Configuration
# -----------------------------------------------------------------------------
# Logging
OBSERVABILITY__LOG_JSON_FORMAT=false  # Plain text logs for local development

# Health Checks
OBSERVABILITY__ENABLE_DEPENDENCY_HEALTH_CHECKS=true
OBSERVABILITY__HEALTH_CHECK_TIMEOUT=5.0

# Circuit Breaker (Resilience for External Services)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5      # Failures before opening circuit
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2      # Successes to close circuit
CIRCUIT_BREAKER_TIMEOUT=60.0             # Seconds in OPEN before testing recovery
CIRCUIT_BREAKER_RESET_TIMEOUT=300.0      # Seconds before resetting failure counter
